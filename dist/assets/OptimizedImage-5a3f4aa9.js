import{j as e}from"./index-93bf93cb.js";import{r as t}from"./vendor-51280515.js";const a=({src:a,alt:s,className:r="",loading:i="lazy",placeholder:n="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PC9zdmc+",sizes:o="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",quality:c=80,...l})=>{const[m,d]=t.useState(!1),[u,f]=t.useState(!1),[w,p]=t.useState(!1),[b,h]=t.useState(0),g=t.useRef(null),{src:x,srcSet:v,fallbackSrc:j}=(e=>{if(!e||!e.includes("unsplash.com"))return{src:e};const t=e.split("?")[0];return{src:`${t}?${new URLSearchParams(e.split("?")[1]||"").toString()}&q=${c}&fm=webp&auto=format`,srcSet:[`${t}?w=400&q=${c}&fm=webp&auto=format 400w`,`${t}?w=600&q=${c}&fm=webp&auto=format 600w`,`${t}?w=800&q=${c}&fm=webp&auto=format 800w`,`${t}?w=1200&q=${c}&fm=webp&auto=format 1200w`,`${t}?w=1600&q=${c}&fm=webp&auto=format 1600w`].join(", "),fallbackSrc:e}})(a);t.useEffect(()=>{const e=new IntersectionObserver(([t])=>{t.isIntersecting&&(f(!0),e.disconnect())},{threshold:.1,rootMargin:"50px"});return g.current&&"lazy"===i?e.observe(g.current):f(!0),()=>e.disconnect()},[i]);return t.useEffect(()=>{if("eager"===i&&x){const e=document.createElement("link");return e.rel="preload",e.as="image",e.href=x,v&&e.setAttribute("imagesrcset",v),o&&e.setAttribute("imagesizes",o),document.head.appendChild(e),()=>{document.head.contains(e)&&document.head.removeChild(e)}}},[x,v,o,i]),e.jsxs("div",{ref:g,className:`relative overflow-hidden ${r}`,children:[!m&&!w&&e.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"})}),(u||"eager"===i)&&!w&&e.jsx("img",{src:b>0?j:x,srcSet:0===b?v:void 0,sizes:0===b?o:void 0,alt:s,loading:i,onLoad:()=>{d(!0),h(0)},onError:()=>{b<2&&j&&j!==x?h(e=>e+1):p(!0)},decoding:"async",className:"w-full h-full object-cover transition-opacity duration-300 "+(m?"opacity-100":"opacity-0"),style:{contentVisibility:"auto",containIntrinsicSize:"300px 200px"},...l}),w&&e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center min-h-[200px]",children:e.jsx("span",{className:"text-gray-500 text-sm",children:"Image not available"})})]})};export{a as O};
